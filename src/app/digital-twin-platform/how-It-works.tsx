"use client";
import svgPaths from "../../imports/svg-zvmjtzwbe4";
import { useRef } from "react";
import { motion, useScroll, useTransform } from "framer-motion";

function Frame43() {
  return (
    <div className="content-stretch flex flex-col gap-[20px] items-center not-italic relative shrink-0 w-[1312px]">
      <p className="font-['Gilroy:Semibold',sans-serif] leading-[46px] relative shrink-0 text-[42px] text-nowrap text-white whitespace-pre">
        How it works
      </p>
      <p className="font-['Gilroy:Regular',sans-serif] leading-[25px] relative shrink-0 text-[#e4e4e4] text-[18px] text-center w-[980px]">
        Our system links physical operations to digital twins, enabling
        real-time control and optimization. This boosts efficiency, ensures
        adaptive responses, and maximizes performance.
      </p>
    </div>
  );
}

function Frame59() {
  return (
    <div className="[grid-area:1_/_1] h-[200px] ml-[100px] mt-0 relative w-[18px]">
      <svg
        className="block size-full"
        fill="none"
        preserveAspectRatio="none"
        viewBox="0 0 18 200"
      >
        <g id="Frame 1171278974">
          <path
            d={svgPaths.pb09d780}
            fill="var(--fill-0, white)"
            fillOpacity="0.36"
            id="Vector 10 (Stroke)"
          />
          <circle
            cx="9"
            cy="191"
            fill="var(--fill-0, #2AC3FF)"
            id="Ellipse 16"
            r="9"
          />
        </g>
      </svg>
    </div>
  );
}

function Frame62() {
  return (
    <div className="[grid-area:1_/_1] h-[200px] ml-[766px] mt-0 relative w-[18px]">
      <svg
        className="block size-full"
        fill="none"
        preserveAspectRatio="none"
        viewBox="0 0 18 200"
      >
        <g id="Frame 1171278974">
          <path
            d={svgPaths.pb09d780}
            fill="var(--fill-0, white)"
            fillOpacity="0.36"
            id="Vector 10 (Stroke)"
          />
          <circle
            cx="9"
            cy="191"
            fill="var(--fill-0, #2AC3FF)"
            id="Ellipse 16"
            r="9"
          />
        </g>
      </svg>
    </div>
  );
}

function Frame61() {
  return (
    <div className="[grid-area:1_/_1] h-[200px] ml-[433px] mt-[184px] relative w-[18px]">
      <svg
        className="block size-full"
        fill="none"
        preserveAspectRatio="none"
        viewBox="0 0 18 200"
      >
        <g id="Frame 1171278976">
          <circle
            cx="9"
            cy="9"
            fill="var(--fill-0, #2AC3FF)"
            id="Ellipse 16"
            r="9"
          />
          <path
            d={svgPaths.p1a78cb00}
            fill="var(--fill-0, white)"
            fillOpacity="0.36"
            id="Vector 10 (Stroke)"
          />
        </g>
      </svg>
    </div>
  );
}

function Frame63() {
  return (
    <div className="[grid-area:1_/_1] h-[200px] ml-[1098px] mt-[184px] relative w-[18px]">
      <svg
        className="block size-full"
        fill="none"
        preserveAspectRatio="none"
        viewBox="0 0 18 200"
      >
        <g id="Frame 1171278976">
          <circle
            cx="9"
            cy="9"
            fill="var(--fill-0, #2AC3FF)"
            id="Ellipse 16"
            r="9"
          />
          <path
            d={svgPaths.p1a78cb00}
            fill="var(--fill-0, white)"
            fillOpacity="0.36"
            id="Vector 10 (Stroke)"
          />
        </g>
      </svg>
    </div>
  );
}

function Frame60() {
  return (
    <div className="[grid-area:1_/_1] content-stretch flex flex-col gap-[8px] items-start ml-[138px] mt-0 not-italic relative w-[280px]">
      <p className="font-['Gilroy:Semibold',sans-serif] leading-[32px] relative shrink-0 text-[#2ac3ff] text-[28px] text-nowrap whitespace-pre">
        1. Connect
      </p>
      <p className="font-['Gilroy:Regular',sans-serif] leading-[22px] min-w-full relative shrink-0 text-[16px] text-white w-[min-content]">
        Edge gateways ingest OT, IoT, BMS, EMS, and IT systems into a
        time-aligned stream.
      </p>
    </div>
  );
}

function Frame66() {
  return (
    <div className="[grid-area:1_/_1] content-stretch flex flex-col gap-[8px] items-start ml-[804px] mt-0 not-italic relative w-[280px]">
      <p className="font-['Gilroy:Semibold',sans-serif] leading-[32px] relative shrink-0 text-[#2ac3ff] text-[28px] text-nowrap whitespace-pre">
        3. Simulate
      </p>
      <p className="font-['Gilroy:Regular',sans-serif] leading-[22px] min-w-full relative shrink-0 text-[16px] text-white w-[min-content]">
        Run what-if scenarios using physics + ML models to test policies and
        designs.
      </p>
    </div>
  );
}

function Frame64() {
  return (
    <div className="[grid-area:1_/_1] content-stretch flex flex-col gap-[8px] items-start ml-[471px] mt-[278px] not-italic relative w-[280px]">
      <p className="font-['Gilroy:Semibold',sans-serif] leading-[32px] relative shrink-0 text-[#2ac3ff] text-[28px] text-nowrap whitespace-pre">
        2. Model
      </p>
      <p className="font-['Gilroy:Regular',sans-serif] leading-[22px] min-w-full relative shrink-0 text-[16px] text-white w-[min-content]">
        Map assets, processes, and KPIs into a semantic graph with versioned
        templates.
      </p>
    </div>
  );
}

function Frame65() {
  return (
    <div className="[grid-area:1_/_1] content-stretch flex flex-col gap-[8px] items-start ml-[1136px] mt-[278px] not-italic relative w-[276px]">
      <p className="font-['Gilroy:Semibold',sans-serif] leading-[32px] relative shrink-0 text-[#2ac3ff] text-[28px] text-nowrap whitespace-pre">
        4. Optimize
      </p>
      <p className="font-['Gilroy:Regular',sans-serif] leading-[22px] min-w-full relative shrink-0 text-[16px] text-white w-[min-content]">
        Close the loop with set-points, schedules, and automated work orders.
      </p>
    </div>
  );
}

function Group2() {
  const containerRef = useRef<HTMLDivElement>(null);
  const { scrollYProgress } = useScroll({
    target: containerRef,
    offset: ["start end", "end start"],
  });

  const lineLength = useTransform(scrollYProgress, [0, 1], [1, 1511]);

  // Opacity animations for each numbered section
  // Each section fades in as it enters the viewport
  const opacity1 = useTransform(scrollYProgress, [0, 0.15], [0.3, 1]);
  const opacity2 = useTransform(scrollYProgress, [0.2, 0.4], [0.3, 1]);
  const opacity3 = useTransform(scrollYProgress, [0.4, 0.6], [0.3, 1]);
  const opacity4 = useTransform(scrollYProgress, [0.6, 0.8], [0.3, 1]);

  return (
    <div
      ref={containerRef}
      className="grid-cols-[max-content] grid-rows-[max-content] inline-grid leading-[0] place-items-start relative shrink-0"
    >
      <div className="[grid-area:1_/_1] h-0 ml-0 mt-[192px] relative w-[1512px]">
        <div className="absolute bottom-0 left-0 right-0 top-[-2px]">
          <svg
            className="block size-full"
            fill="none"
            preserveAspectRatio="none"
            viewBox="0 0 1512 2"
          >
            {/* Initial background line */}
            <line
              stroke="#FFFFFF3D"
              strokeLinecap="round"
              strokeWidth="2"
              x1="1"
              x2="1511"
              y1="1"
              y2="1"
            />
            {/* Animated white line that fills on scroll */}
            <motion.line
              id="Line 30"
              stroke="white"
              strokeLinecap="round"
              strokeWidth="2"
              x1="1"
              x2={lineLength}
              y1="1"
              y2="1"
            />
          </svg>
        </div>
      </div>
      <Frame59 />
      <Frame62 />
      <Frame61 />
      <Frame63 />
      <motion.div style={{ opacity: opacity1 }} className="[grid-area:1_/_1]">
        <Frame60 />
      </motion.div>
      <motion.div style={{ opacity: opacity3 }} className="[grid-area:1_/_1]">
        <Frame66 />
      </motion.div>
      <motion.div style={{ opacity: opacity2 }} className="[grid-area:1_/_1]">
        <Frame64 />
      </motion.div>
      <motion.div style={{ opacity: opacity4 }} className="[grid-area:1_/_1]">
        <Frame65 />
      </motion.div>
    </div>
  );
}

function HowItWorks() {
  return (
    <div
      className="content-stretch flex flex-col gap-[80px] items-center overflow-clip pb-[70px] pt-[60px] px-0 relative shrink-0 w-[1512px]"
      data-name="How it works"
      style={{
        background: "linear-gradient(257.57deg, #003D55 0%, #055778 100%)",
      }}
    >
      <Frame43 />
      <Group2 />
    </div>
  );
}

export default HowItWorks;
